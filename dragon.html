<!DOCTYPE html>
<html>
<head>
	<title>Fight the Dragon</title>

	<link rel="stylesheet" type="text/css" href="dragon.css">
</head>
<body>

<div id="game">
	<div id="main1">	
		<h1>Fight the Dragon</h1>
		<div id="dragon">
			<img name="scary_dragon" src="dice/new_dragon.png">
		</div>
		
		<p>Do you choose to...</p>
		<input class="button" type="button" onclick="fightDragon()" value="Fight">
		<input class="button" type="button" onclick="fleeDragon()" value="Flee">
	</div>	

	<div id="main2">
		<h2>Dragon's Roll</h2>
		<img name="die3" src="dice/new_die1.png">
		<img name="die4" src="dice/new_die1.png">

		<div class="health">
			<h3>HP:</h3>
			<div id="dragonHP">20</div>
		</div>			

		<h2>Your Roll</h2>
		<img name="die1" src="dice/new_die1.png">
		<img name="die2" src="dice/new_die1.png">

		<div class="health">
			<h3>HP:</h3>
			<div id="yourHP">20</div>
		</div>	

		<div id="buttons">
			<input class="button" type="button" onclick="rollDice();" value="Fight!">
			<input class="button" type="button" onclick="specialCombat();" value="Fight bravely!">
		</div>	
	</div>	
</div>

<script type="text/javascript">




	// document.getElementById('die1');
	function fightDragon(){
		alert("You are brave! To defeat the dragon you must roll a 9 or higher on the die, otherwise you will be burnt to a crisp. Let's roll the dice!");
	}

	function fleeDragon(){
		alert("Scaredy cat! You're fleeing?");
		document.getElementById("dragon").innerHTML = '<img src="dice/loser.png" />';
		
	}

	// function rollDice(){

	// 	var randomDie1 = Math.floor(Math.random() * 6)+1
	// 	var randomDie2 = Math.floor(Math.random() * 6)+1

	// 	// console.log(randomDie1);
	// 	// console.log(randomDie2);
	// 	// console.dir(document.images);

	// 	document.images.die1.src = 'dice/d' + randomDie1 + '.gif';
	// 	document.images.die2.src = 'dice/d' + randomDie2 + '.gif';

	// 	var sum = Number(randomDie1) + Number(randomDie2);
	// 	if(sum > 9){
	// 		alert("Great job! You scored a direct hit with that roll of " + sum);
	// 	}else if(sum < 9){
	// 		alert("Ooh! Too bad, you got burned to a crips because you only rolled " + sum);
	// 	}
	// }

	var damageTakenUser = 0;
	var damageTakenDragon = 0;
	var yourHP = 20;
	var dragonHP = 20;

	function rollDice(){

		var randomDie1 = Math.floor(Math.random() * 6)+1
		var randomDie2 = Math.floor(Math.random() * 6)+1

		var randomDie3 = Math.floor(Math.random() * 6)+1
		var randomDie4 = Math.floor(Math.random() * 6)+1

		var yourTotal = Number(randomDie1 + randomDie2);
		var dragonTotal = Number(randomDie3 + randomDie4);
		// console.log(randomDie1);
		// console.log(randomDie2);
		// console.dir(document.images);

		document.images.die1.src = 'dice/new_die' + randomDie1 + '.png';
		document.images.die2.src = 'dice/new_die' + randomDie2 + '.png';
		document.images.die3.src = 'dice/new_die' + randomDie3 + '.png';
		document.images.die4.src = 'dice/new_die' + randomDie4 + '.png';

		if(yourTotal >= 9 && dragonTotal >= 9){
			alert("Congrats! You scored a direct hit, but you also got singed by the dragon!");
			subtractdragonHPdragonHP(4);
			subtractyourHP(4);
		}else if(dragonTotal >= yourTotal && dragonTotal >= 9) {
			alert("Watch out, you're gonna get roasted like a marshmallow!");
			subtractyourHP(4);
		}else if(yourTotal >= dragonTotal && yourTotal >= 9){
			alert("Nice job! You successfully hit the drgaon and missed its angry flames!");
			subtractdragonHP(4);
		}else if(yourTotal === dragonTotal){
			alert("Your attacks were equally matched this round! No damage done.");
		}else{
			alert("You both missed?! Come on - get your head in the game!")
	}

	function specialCombat() {
		var randomDie1 = Math.floor(Math.random() * 6)+1
		var randomDie2 = Math.floor(Math.random() * 6)+1

		var randomDie3 = Math.floor(Math.random() * 6)+1
		var randomDie4 = Math.floor(Math.random() * 6)+1

		var yourTotal = Number(randomDie1 + randomDie2);
		var dragonTotal = Number(randomDie3 + randomDie4);

		document.images.die1.src = 'dice/new_die' + randomDie1 + '.png';
		document.images.die2.src = 'dice/new_die' + randomDie2 + '.png';
		document.images.die3.src = 'dice/new_die' + randomDie3 + '.png';
		document.images.die4.src = 'dice/new_die' + randomDie4 + '.png';

		if (Number(yourTotal) >= 9) {
			alert("Way to go! Your hit was twice as powerful as usual!");
			subtractdragonHP(8);
		}else if(Number(dragonTotal) >= 9) {
			alert("Is it hot in here or is it just you? That flame's really strong this time!");
			subtractyourHP(8);
		}
	}

	 function subtractyourHP(n){
        var health1 = document.getElementById("heroHP").value;
        var newHealth1 = parseInt(health1) - n;
        if(newHealth1 > 20){
            newHealth1 = 20;
        }
        while(newHealth1 >= 0){
            document.getElementById("heroHP").value = newHealth1;
            return newHealth1;
        }
        alert("YOU HAVE DIED!!");
    }
    function subtractdragonHP(n){
        var health2 = document.getElementById("dragonHP").value;
        var newHealth2 = parseInt(health2) - n;
        while(newHealth2 >= 0){
            document.getElementById("dragonHP").value = newHealth2;
            return newHealth2;
        }
            alert("YOU HAVE SLAYED THE DRAGON!!");
    }

    function combat(){
    	rollDice()    	
    	specialCombat()
    	subtractyourHP()
    	subtractdragonHP()
    }

</script>

</body>
</html>